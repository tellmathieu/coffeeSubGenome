Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 20
Rules claiming more threads will be scaled down.
Job stats:
job                 count
----------------  -------
all                     1
refineParameters        2
total                   3

Select jobs to execute...

[Wed Aug 21 19:10:55 2024]
rule refineParameters:
    input: /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_bonafide.out, /data/data2/homes/tmathieu/testingCofSM/subEugenioides/bonafide.gb, /home/tmathieu/miniforge3/envs/liftnew/config/species/subEugenioides/subEugenioides_parameters.cfg
    output: /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
    jobid: 1
    reason: Missing output files: /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
    wildcards: subgenome=subEugenioides
    resources: tmpdir=/tmp


		errors=$(grep -c "Variable stopCodonExcludedFromCDS set right" /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_bonafide.out)
		totalLoci=$(grep -c LOCUS /data/data2/homes/tmathieu/testingCofSM/subEugenioides/bonafide.gb)

		errorRate=$(($errors/$totalLoci))

		echo "Initial Check for Bad Training Genes" > /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
		echo "# of errors stopCodonExcludedFromCDS:" >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
		echo $errors >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
		echo "total # of loci in bonafide.gb:" >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
		echo $totalLoci >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt

		# In Alternate Protocol 4, authors stated that stopCodonExcludedFromCDS 
		# did not need to be set to TRUE unless the number of errors 
		# wasn't a minority.
		# I set this as 20%, but this would be up for debate, a correct percentage wasn't indicated by the authors.
		if [ $errorRate -gt 0.2 ]; then
			echo "Need to refine parameters" >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
			sed -i 's/stopCodonExcludedFromCDS false/stopCodonExcludedFromCDS true/g' /home/tmathieu/miniforge3/envs/liftnew/config/species/subEugenioides/subEugenioides_parameters.cfg
			echo "stopCodonExcludedFromCDS is changed to TRUE" >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
 		else
			echo "Good to go for stopCodonExcludedFromCDS!" >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
		fi
	

[Wed Aug 21 19:10:55 2024]
rule refineParameters:
    input: /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_bonafide.out, /data/data2/homes/tmathieu/testingCofSM/subCanephora/bonafide.gb, /home/tmathieu/miniforge3/envs/liftnew/config/species/subCanephora/subCanephora_parameters.cfg
    output: /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
    jobid: 39
    reason: Missing output files: /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
    wildcards: subgenome=subCanephora
    resources: tmpdir=/tmp


		errors=$(grep -c "Variable stopCodonExcludedFromCDS set right" /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_bonafide.out)
		totalLoci=$(grep -c LOCUS /data/data2/homes/tmathieu/testingCofSM/subCanephora/bonafide.gb)

		errorRate=$(($errors/$totalLoci))

		echo "Initial Check for Bad Training Genes" > /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
		echo "# of errors stopCodonExcludedFromCDS:" >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
		echo $errors >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
		echo "total # of loci in bonafide.gb:" >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
		echo $totalLoci >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt

		# In Alternate Protocol 4, authors stated that stopCodonExcludedFromCDS 
		# did not need to be set to TRUE unless the number of errors 
		# wasn't a minority.
		# I set this as 20%, but this would be up for debate, a correct percentage wasn't indicated by the authors.
		if [ $errorRate -gt 0.2 ]; then
			echo "Need to refine parameters" >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
			sed -i 's/stopCodonExcludedFromCDS false/stopCodonExcludedFromCDS true/g' /home/tmathieu/miniforge3/envs/liftnew/config/species/subCanephora/subCanephora_parameters.cfg
			echo "stopCodonExcludedFromCDS is changed to TRUE" >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
 		else
			echo "Good to go for stopCodonExcludedFromCDS!" >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
		fi
	
[Wed Aug 21 19:10:55 2024]
Error in rule refineParameters:
    jobid: 1
    input: /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_bonafide.out, /data/data2/homes/tmathieu/testingCofSM/subEugenioides/bonafide.gb, /home/tmathieu/miniforge3/envs/liftnew/config/species/subEugenioides/subEugenioides_parameters.cfg
    output: /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
    shell:
        
		errors=$(grep -c "Variable stopCodonExcludedFromCDS set right" /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_bonafide.out)
		totalLoci=$(grep -c LOCUS /data/data2/homes/tmathieu/testingCofSM/subEugenioides/bonafide.gb)

		errorRate=$(($errors/$totalLoci))

		echo "Initial Check for Bad Training Genes" > /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
		echo "# of errors stopCodonExcludedFromCDS:" >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
		echo $errors >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
		echo "total # of loci in bonafide.gb:" >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
		echo $totalLoci >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt

		# In Alternate Protocol 4, authors stated that stopCodonExcludedFromCDS 
		# did not need to be set to TRUE unless the number of errors 
		# wasn't a minority.
		# I set this as 20%, but this would be up for debate, a correct percentage wasn't indicated by the authors.
		if [ $errorRate -gt 0.2 ]; then
			echo "Need to refine parameters" >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
			sed -i 's/stopCodonExcludedFromCDS false/stopCodonExcludedFromCDS true/g' /home/tmathieu/miniforge3/envs/liftnew/config/species/subEugenioides/subEugenioides_parameters.cfg
			echo "stopCodonExcludedFromCDS is changed to TRUE" >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
 		else
			echo "Good to go for stopCodonExcludedFromCDS!" >> /data/data2/homes/tmathieu/testingCofSM/subEugenioides/subEugenioides_error_check.txt
		fi
	
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Wed Aug 21 19:10:55 2024]
Error in rule refineParameters:
    jobid: 39
    input: /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_bonafide.out, /data/data2/homes/tmathieu/testingCofSM/subCanephora/bonafide.gb, /home/tmathieu/miniforge3/envs/liftnew/config/species/subCanephora/subCanephora_parameters.cfg
    output: /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
    shell:
        
		errors=$(grep -c "Variable stopCodonExcludedFromCDS set right" /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_bonafide.out)
		totalLoci=$(grep -c LOCUS /data/data2/homes/tmathieu/testingCofSM/subCanephora/bonafide.gb)

		errorRate=$(($errors/$totalLoci))

		echo "Initial Check for Bad Training Genes" > /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
		echo "# of errors stopCodonExcludedFromCDS:" >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
		echo $errors >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
		echo "total # of loci in bonafide.gb:" >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
		echo $totalLoci >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt

		# In Alternate Protocol 4, authors stated that stopCodonExcludedFromCDS 
		# did not need to be set to TRUE unless the number of errors 
		# wasn't a minority.
		# I set this as 20%, but this would be up for debate, a correct percentage wasn't indicated by the authors.
		if [ $errorRate -gt 0.2 ]; then
			echo "Need to refine parameters" >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
			sed -i 's/stopCodonExcludedFromCDS false/stopCodonExcludedFromCDS true/g' /home/tmathieu/miniforge3/envs/liftnew/config/species/subCanephora/subCanephora_parameters.cfg
			echo "stopCodonExcludedFromCDS is changed to TRUE" >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
 		else
			echo "Good to go for stopCodonExcludedFromCDS!" >> /data/data2/homes/tmathieu/testingCofSM/subCanephora/subCanephora_error_check.txt
		fi
	
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2024-08-21T191054.464497.snakemake.log
